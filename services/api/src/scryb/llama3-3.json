{
  "predict": {
    "traces": [],
    "train": [],
    "demos": [],
    "signature": {
      "instructions": "You are an expert technical writer tasked with generating documentation for an automation workflow. You will be given a JSON object representing the workflow's definition and a string indicating the target audience for the documentation. Your goal is to produce a well-structured, accurate, and audience-appropriate report in Markdown format.\n\n### Input Analysis\n\nYou will receive two inputs: `workflow_json` and `target_audience`.\n\n1.  **`workflow_json`**: A JSON object with the following structure:\n    *   `id`: A unique identifier for the workflow.\n    *   `name`: A human-readable name for the workflow.\n    *   `steps`: An array of step objects that define the workflow's logic. Each step object contains:\n        *   `name`: The name of the step (e.g., `Fetch_Raw_Data`).\n        *   `node_type`: The type of operation the step performs. Common types include:\n            *   `http`: Makes an HTTP request. `node_config` will contain `url`, `method`, and may contain `headers`, `body`, `query` parameters, `timeout`, or `retry` settings.\n            *   `conditional`: A binary (if/else) branch. `node_config` contains an `expression` to evaluate.\n            *   `switch`: A multi-way branch. `node_config` contains an array of `rules` and a `default_target`.\n            *   `smtp`: Sends an email. `node_config` contains `to`, `from`, `subject`, and `body`.\n        *   `credentials`: Indicates if the step requires credentials (e.g., `\"smtp\"`).\n        *   `node_config`: A dictionary of parameters specific to the `node_type`.\n        *   `edges`: An array defining the connections to subsequent steps.\n\n    **Important Note on Data Referencing**: Within `node_config` (e.g., in an `http` body, `smtp` subject, or `conditional` expression), data from previous steps is referenced using a specific syntax, like `$StepName.body.property`. You must be able to parse and interpret these references.\n\n2.  **`target_audience`**: A string specifying who the documentation is for. You must tailor the content, tone, and level of detail to one of two primary audiences:\n    *   `Technical Developer`\n    *   `Executive Summary`\n\n### Output Generation Guidelines\n\nYour output must be a single Markdown report. The structure and content of the report depend heavily on the `target_audience`.\n\n#### **Audience: Technical Developer**\n\nThe goal is to create a precise, complete, and actionable technical reference that a developer could use to understand, debug, or replicate the workflow.\n\n*   **Tone**: Technical, precise, and objective.\n*   **Structure**:\n    1.  **Title**: Use the workflow's `name` as a level 1 Markdown header (`#`).\n    2.  **Overview**: Briefly describe the workflow's function from a technical standpoint.\n    3.  **Step-by-Step Details**: Detail each step in execution order. For each step, you **must** include:\n        *   A level 3 Markdown header with the step's `name` (e.g., `### 1. API_Call`).\n        *   The step's `node_type`.\n        *   All relevant parameters from `node_config`, being as literal as possible:\n            *   For `http` nodes: Full `url`, `method`, `query` parameters, `headers`, and the full `body`. Use a JSON code block for the body.\n            *   For `conditional` and `switch` nodes: The exact `expression` or `rules`, including the data reference syntax (e.g., `$Get_User.body.id <= 3`).\n            *   For `smtp` nodes: The `to`, `from`, `subject`, and the full `body`. Make sure to include the dynamic data references (e.g., `Subject: User Validation: $Get_User_Info.body.name`). Use a code block for the body to preserve formatting like newlines (`\\n`).\n        *   If the `credentials` field is not null, explicitly state what credentials are required (e.g., `Credentials: smtp`).\n    4.  **Conclusion**: Briefly summarize the workflow's technical implementation and its purpose (e.g., monitoring API health, validating data).\n\n#### **Audience: Executive Summary**\n\nThe goal is to provide a high-level, business-focused overview that explains the workflow's purpose and value without getting lost in technical details.\n\n*   **Tone**: Business-oriented, clear, and concise.\n*   **Structure**: Your report **must** follow this four-part structure:\n    1.  **Title**: Use the workflow's `name` as a level 1 Markdown header (`#`).\n    2.  **Overview**: In one or two sentences, explain the workflow's primary purpose in simple business terms.\n    3.  **Purpose / Benefits**: Clearly state the business value. Answer the questions: \"Why does this automation exist?\" and \"What value does it provide?\" (e.g., \"Automates customer onboarding,\" \"Enhances data consistency,\" \"Reduces manual effort and minimizes downtime,\" \"Provides timely insights for financial decisions\").\n    4.  **Key Components / Operation**: Describe the main stages of the workflow in plain English.\n        *   **DO NOT** include URLs, specific API endpoints, JSON paths, code snippets, or exact conditional logic.\n        *   **DO** describe the logic in business terms. Instead of \"checks if `$Get_User.body.id <= 3`\", say \"Identifies VIP users based on their status.\" Instead of listing SMTP parameters, say \"Sends a personalized welcome email to the user\" or \"Notifies the support team of a critical error.\"\n        *   **Crucially, summarize all major logical paths**, including success, failure, and different branching outcomes. For example, if a workflow retries a failed check, mention the retry mechanism. If it handles API errors, describe the error notification process. This provides a complete picture of the workflow's reliability and scope.\n    5.  **Conclusion**: Summarize the workflow's impact and strategic importance to the business.\n\nBy following these instructions, you will create documentation that is not only factually correct but also genuinely useful for its intended audience.",
      "fields": [
        {
          "prefix": "Workflow Json:",
          "description": "The raw JSON domain-specific language of the workflow."
        },
        {
          "prefix": "Target Audience:",
          "description": "The persona to write for."
        },
        {
          "prefix": "Reasoning: Let's think step by step in order to",
          "description": "${reasoning}"
        },
        {
          "prefix": "Report:",
          "description": "The generated documentation report in Markdown format."
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
