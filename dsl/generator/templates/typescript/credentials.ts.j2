// ⚠️ GENERATED FILE - DO NOT EDIT MANUALLY
// This file is generated from dsl/dsl-definition.json
// To update, modify dsl/dsl-definition.json and run: make dsl-generate
//
// Manual sections are marked with "TODO: MANUAL UPDATE REQUIRED" comments

import type { CredentialType } from "@/client/types.gen";

export interface CredentialRef {
  type: CredentialType;
  id: string;
  name: string;
}

// ============================================================================
// GENERATED: Node types requiring credentials
// ============================================================================
// This set is generated from dsl/dsl-definition.json based on nodes with
// requires_credentials: true. Current node types requiring credentials:
{% for node_type, node_def in dsl.node_types.items() %}
{% if node_def.get("requires_credentials") %}
// - {{ node_def.frontend_type }} ({{ node_type }})
{% endif %}
{% endfor %}
// ============================================================================
const NODE_TYPES_REQUIRING_CREDENTIALS = new Set<string>([
{% for node_type, node_def in dsl.node_types.items() %}
{% if node_def.get("requires_credentials") %}
  "{{ node_def.frontend_type }}",
{% endif %}
{% endfor %}
]);

// ============================================================================
// GENERATED: Credential validation function
// ============================================================================
export function isCredentialRef(value: unknown): value is CredentialRef {
  if (!value || typeof value !== "object") return false;
  const candidate = value as Record<string, unknown>;
  return (
    typeof candidate.id === "string" &&
    typeof candidate.type === "string" &&
    typeof candidate.name === "string"
  );
}

export function nodeTypeRequiresCredential(nodeType: string): boolean {
  return NODE_TYPES_REQUIRING_CREDENTIALS.has(nodeType);
}

